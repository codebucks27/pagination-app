{"ast":null,"code":"var _jsxFileName = \"D:\\\\Open source\\\\pagination-app\\\\src\\\\components\\\\Animals.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { usePaginatedQuery, useQuery } from 'react-query';\nimport Animal from './Animal';\n\nconst fetchAnimals = async (key, page) => {\n  const headers = {\n    'app-id': '628cfd76d7c13ab387fde193'\n  }; // GET request to get data\n\n  const res = await fetch(`https://dummyapi.io/data/v1/post?limit=10&page=${page}`, {\n    headers\n  });\n  return res.json();\n};\n\nconst Animals = () => {\n  _s();\n\n  const {\n    resolvedData,\n    latestData,\n    status\n  } = usePaginatedQuery(['animals', page], fetchAnimals);\n  const [page, setPage] = useState(1);\n  const [totalPage, setTotalPage] = useState(1);\n  const [pageNumberLimit, setpageNumberLimit] = useState(5);\n  const [maxPageNumberLimit, setmaxPageNumberLimit] = useState(10);\n  const [minPageNumberLimit, setminPageNumberLimit] = useState(0);\n  const pages = [];\n\n  const handleClick = () => {\n    let newPage = page + 1;\n    setPage(newPage);\n  };\n\n  const renderPageNumbers = pages.map(number => {\n    if (number < maxPageNumberLimit + 1 && number > minPageNumberLimit) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: number,\n        id: number,\n        onClick: () => handleClick(),\n        className: page == number ? \"active\" : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 9\n        }\n      }, number);\n    } else {\n      return null;\n    }\n  });\n  useEffect(() => {\n    if (latestData !== undefined) {\n      let noOfPages = Math.ceil(latestData.total / latestData.limit);\n      setTotalPage(noOfPages);\n      setmaxPageNumberLimit(latestData.limit);\n\n      for (let i = 1; i <= noOfPages; i++) {\n        pages.push(i);\n      }\n    }\n  }, [latestData]);\n\n  let handleNext = () => {\n    let newPage = page + 1;\n    setPage(newPage); // setPage(old => (!latestData || !latestData.next ? old : old + 1));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, status === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"Loading data\"), status === 'error' && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"Error fetching data\"), status === 'success' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-gray-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, \"Animals\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-2xl mx-auto py-16 sm:py-24 lg:py-32 lg:max-w-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-2xl font-extrabold text-gray-900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, \"Collections\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-6 space-y-12 lg:space-y-0 lg:grid lg:grid-cols-3 lg:gap-x-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 19\n    }\n  }, resolvedData.data.map(animal => /*#__PURE__*/React.createElement(\"span\", {\n    key: animal.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 57\n    }\n  }, animal.owner.firstName))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",\n    onClick: () => setPage(old => Math.max(old - 1, 1)),\n    disabled: page === 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, \"Previous Page\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, renderPageNumbers), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",\n    onClick: () => handleNext(),\n    disabled: totalPage === page,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, \"Next page\"))))));\n};\n\n_s(Animals, \"QgsJqCpOvd0a961bJZZbYUhNLWs=\", false, function () {\n  return [usePaginatedQuery];\n});\n\n_c = Animals;\nexport default Animals;\n\nvar _c;\n\n$RefreshReg$(_c, \"Animals\");","map":{"version":3,"names":["React","useState","useEffect","usePaginatedQuery","useQuery","Animal","fetchAnimals","key","page","headers","res","fetch","json","Animals","resolvedData","latestData","status","setPage","totalPage","setTotalPage","pageNumberLimit","setpageNumberLimit","maxPageNumberLimit","setmaxPageNumberLimit","minPageNumberLimit","setminPageNumberLimit","pages","handleClick","newPage","renderPageNumbers","map","number","undefined","noOfPages","Math","ceil","total","limit","i","push","handleNext","data","animal","id","owner","firstName","old","max"],"sources":["D:/Open source/pagination-app/src/components/Animals.js"],"sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport { usePaginatedQuery, useQuery } from 'react-query';\r\nimport Animal from './Animal';\r\n\r\nconst fetchAnimals = async (key, page) => {\r\n  const headers = { 'app-id': '628cfd76d7c13ab387fde193' }\r\n  // GET request to get data\r\n  const res = await fetch(`https://dummyapi.io/data/v1/post?limit=10&page=${page}`, { headers } );\r\n    return res.json();\r\n}\r\n\r\n\r\nconst Animals = () => {\r\n\r\n  const { \r\n    resolvedData, \r\n    latestData, \r\n    status \r\n  } = usePaginatedQuery(['animals', page], fetchAnimals);\r\n\r\n\r\n  const [ page, setPage ] = useState(1);\r\n  const [ totalPage, setTotalPage ] = useState(1);\r\n\r\n\r\n\r\n  \r\n  const [pageNumberLimit, setpageNumberLimit] = useState(5);\r\n  const [maxPageNumberLimit, setmaxPageNumberLimit] = useState(10);\r\n  const [minPageNumberLimit, setminPageNumberLimit] = useState(0);\r\n\r\n  const pages = [];\r\n\r\n\r\n  const handleClick = () => {\r\n     let newPage = page + 1;\r\n    setPage(newPage);\r\n  };\r\n\r\n  const renderPageNumbers = pages.map((number) => {\r\n    if (number < maxPageNumberLimit + 1 && number > minPageNumberLimit) {\r\n      return (\r\n        <li\r\n          key={number}\r\n          id={number}\r\n          onClick={() => handleClick()}\r\n          className={page == number ? \"active\" : null}\r\n        >\r\n          {number}\r\n        </li>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  });\r\n\r\n\r\n\r\n    useEffect(() => {\r\n\r\n      if(latestData !== undefined){\r\n       \r\n          let noOfPages = Math.ceil(latestData.total/latestData.limit);\r\n        setTotalPage(noOfPages);\r\n        setmaxPageNumberLimit(latestData.limit)\r\n        for (let i = 1; i <= noOfPages; i++) {\r\n          pages.push(i);\r\n        }\r\n      }\r\n     \r\n    }, [latestData]);\r\n\r\n  let handleNext = () => {\r\n    let newPage = page + 1;\r\n    setPage(newPage);\r\n    // setPage(old => (!latestData || !latestData.next ? old : old + 1));\r\n  }\r\n  return (\r\n    <div>\r\n    \r\n\r\n      {status === 'loading' && (\r\n        <div>Loading data</div>\r\n      )}\r\n\r\n      {status === 'error' && (\r\n        <div>Error fetching data</div>\r\n      )}\r\n\r\n      {status === 'success' && (\r\n        <>\r\n      \r\n          <div className=\"bg-gray-100\">\r\n            <h2>Animals</h2>\r\n              <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"max-w-2xl mx-auto py-16 sm:py-24 lg:py-32 lg:max-w-none\">\r\n                  <h2 className=\"text-2xl font-extrabold text-gray-900\">Collections</h2>\r\n                  <div className=\"mt-6 space-y-12 lg:space-y-0 lg:grid lg:grid-cols-3 lg:gap-x-6\">\r\n                      {/* { resolvedData.data.map(animal => <Animal key={animal} animal={animal} /> ) } */}\r\n                      { resolvedData.data.map(animal => <span key={animal.id}>{animal.owner.firstName}</span> ) }\r\n\r\n                  </div>\r\n                  <button className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded' \r\n            onClick={() => setPage(old => Math.max(old - 1, 1))} \r\n            disabled={page === 1}>\r\n            Previous Page\r\n          </button>\r\n          <span>{ renderPageNumbers }</span>\r\n          <button className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded'\r\n            onClick={() => handleNext()} \r\n           disabled={totalPage === page}\r\n            >\r\n            Next page\r\n          </button>\r\n                </div>\r\n              </div>\r\n            </div>          \r\n        </>\r\n      )} \r\n    </div>\r\n  );\r\n}\r\n \r\nexport default Animals;"],"mappings":"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"},"metadata":{},"sourceType":"module"}